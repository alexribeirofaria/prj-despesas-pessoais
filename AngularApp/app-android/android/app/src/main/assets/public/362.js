"use strict";(self.webpackChunkangularapp=self.webpackChunkangularapp||[]).push([[362],{2362:(X,h,s)=>{s.r(h),s.d(h,{CategoriasModule:()=>N});var C=s(6610),d=s(7222),f=s(7415),a=s(8910),u=s(9450),t=s(3279),T=s(659),g=s(9626),v=s(4587),p=s(2490),b=s(2802),D=s(8278);const y=i=>({"is-invalid":i}),S=(i,Y)=>({"error-bi-input":i,"not-error-input":Y}),R=i=>({disabled:i});let F=(()=>{class i{setCategoria(l){this.categoriatForm.patchValue(l)}setAction(l){this.action=l}setRefresh(l){this.refresh=l}constructor(l,n,r,c){this.formbuilder=l,this.modalAlert=n,this.activeModal=r,this.categoriaService=c,this.action=u.u.Create,this.refresh=()=>{},this.onSaveClick=()=>{let m=this.categoriatForm.getRawValue(),e={...m,idTipoCategoria:Number(m.idTipoCategoria)};try{this.action===u.u.Create?this.categoriaService.postCategoria(e).subscribe({next:o=>{o&&(this.activeModal.close(),this.refresh(),this.modalAlert.open(a.Cy,"Categoria cadastrada com Sucesso.",a.vT.Success))},error:o=>{this.modalAlert.open(a.Cy,o,a.vT.Warning)}}):this.action===u.u.Edit&&this.categoriaService.putCategoria(e).subscribe({next:o=>{null!=o&&(this.activeModal.close(),this.refresh(),this.modalAlert.open(a.Cy,"Categoria alterada com Sucesso.",a.vT.Success))},error:o=>{this.modalAlert.open(a.Cy,o,a.vT.Warning)}})}catch(o){this.modalAlert.open(a.Cy,o,a.vT.Warning)}}}ngOnInit(){this.categoriatForm=this.formbuilder.group({id:[0],descricao:["",d.k0.required],idTipoCategoria:[null,d.k0.required]})}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(d.ok),t.rXU(a.Cy),t.rXU(T.Lw),t.rXU(g.vg))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-categorias-form"]],decls:26,vars:18,consts:[[1,"h-100","d-flex","flex-column","table-responsive","flex-grow-1","flex-fill","m-1","p-0","border","border-2","border-dark","rounded-top-2","rounded-bottom-1","overflow-scroll-hidden"],[1,"modal-header","bg-dark","text-light","mt-0","p-2","rounded-top-2","rounded-bottom-0",2,"position","relative","bottom","0.5rem"],[1,"m-0","border-0"],["type","button","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],[1,"overflow-y-auto","scroll-content","p-2","pt-0"],[3,"ngSubmit","formGroup"],["id","id","name","id","formControlName","id","type","hidden","value","0",1,"form-control"],["appearance","outline","readonly","",1,"w-100","mt-2","dropdown",3,"ngClass"],["matInput","","id","idTipoCategoria","name","idTipoCategoria","formControlName","idTipoCategoria"],["disabled","","selected","",3,"value"],[3,"value"],["appearance","outline",1,"w-100"],["matInput","","id","descricao","name","descricao","formControlName","descricao","type","text","placeholder","Entre com a descricao",1,"form-control",3,"ngClass"],[1,"text-danger","bi","bi-exclamation-circle","position-absolute","mx-2","my-1","top-0","end-0",3,"ngClass"],[1,"input-group","mt-3","d-flex","flex-column","align-items-center","justify-content-center"],["type","submit",1,"btn","btn-primary","w-responsive",3,"ngClass","disabled"]],template:function(n,r){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2),t.EFF(3,"Categorias"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return r.activeModal.dismiss("Cross click")}),t.k0s()(),t.j41(5,"div",4)(6,"form",5),t.bIt("ngSubmit",function(){return r.onSaveClick()}),t.nrm(7,"input",6),t.j41(8,"mat-form-field",7)(9,"mat-label"),t.EFF(10,"Tipo de Categoria"),t.k0s(),t.j41(11,"mat-select",8)(12,"mat-option",9),t.EFF(13,"Nenhum Tipo selecionado"),t.k0s(),t.j41(14,"mat-option",10),t.EFF(15,"Despesas"),t.k0s(),t.j41(16,"mat-option",10),t.EFF(17,"Receitas"),t.k0s()()(),t.j41(18,"mat-form-field",11)(19,"mat-label"),t.EFF(20,"Descri\xe7\xe3o"),t.k0s(),t.nrm(21,"input",12)(22,"i",13),t.k0s(),t.j41(23,"div",14)(24,"button",15),t.EFF(25," Salvar "),t.k0s()()()()()),2&n){let c,m,e;t.R7$(6),t.Y8G("formGroup",r.categoriatForm),t.R7$(2),t.Y8G("ngClass",t.eq3(9,y,(null==(c=r.categoriatForm.get("idTipoCategoria"))||null==c.errors?null:c.errors.required)&&(null==(c=r.categoriatForm.get("idTipoCategoria"))?null:c.touched))),t.R7$(4),t.Y8G("value",null),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.Y8G("value",2),t.R7$(5),t.Y8G("ngClass",t.eq3(11,y,(null==(m=r.categoriatForm.get("descricao"))||null==m.errors?null:m.errors.required)&&(null==(m=r.categoriatForm.get("descricao"))?null:m.touched))),t.R7$(),t.Y8G("ngClass",t.l_i(13,S,(null==(e=r.categoriatForm.get("descricao"))?null:e.hasError("required"))&&(null==(e=r.categoriatForm.get("descricao"))?null:e.touched),!(null!=(e=r.categoriatForm.get("descricao"))&&e.hasError("required")&&null!=(e=r.categoriatForm.get("descricao"))&&e.touched))),t.R7$(2),t.Y8G("ngClass",t.eq3(16,R,!r.categoriatForm.valid))("disabled",!r.categoriatForm.valid)}},dependencies:[C.YU,d.qT,d.me,d.BC,d.cb,d.j4,d.JD,v.fg,p.rl,p.nJ,b.VO,D.wT],styles:[".error-bi-input[_ngcontent-%COMP%]{display:inline}.not-error-input[_ngcontent-%COMP%]{display:none}.cdk-overlay-container[_ngcontent-%COMP%]{z-index:1999}"]})}}return i})();const A=[{title:"Tipo Catategoria",data:"tipoCategoria"},{title:"Descri\xe7\xe3o",data:"descricao"}];var G=s(2710),E=s(7487),j=s(4077),k=s(4901);const I=[{path:"",component:(()=>{class i{constructor(l,n,r,c,m){this.menuService=l,this.modalAlert=n,this.modalForm=r,this.modalConfirm=c,this.categoriaService=m,this.catgoriasData=[],this.columns=A,this.initializeDataTable=()=>{this.categoriaService.getCategorias().subscribe({next:e=>{e&&(this.catgoriasData=this.parseToCategoriaData(e),this.dataTable.loadData(this.catgoriasData),this.dataTable.rerender())},error:e=>{this.modalAlert.open(a.Cy,e,a.vT.Warning)}})},this.updateDatatable=()=>{this.categoriaService.getCategorias().subscribe({next:e=>{e&&(this.catgoriasData=this.parseToCategoriaData(e),this.dataTable.rerender())},error:e=>{this.modalAlert.open(a.Cy,e,a.vT.Warning)}})},this.getCategoriasData=()=>this.catgoriasData,this.onClickNovo=()=>{const e=this.modalForm.modalService.open(F,{centered:!0});e.shown.subscribe(()=>{e.componentInstance.setAction(u.u.Create),e.componentInstance.setRefresh(this.updateDatatable)})},this.onClickEdit=e=>{this.categoriaService.getCategoriaById(e).subscribe({next:o=>{null!=o&&this.editCategoria(o)},error:o=>{this.modalAlert.open(a.Cy,o,a.vT.Warning)}})},this.editCategoria=e=>{const o=this.modalForm.modalService.open(F,{centered:!0});o.shown.subscribe(()=>{o.componentInstance.setAction(u.u.Edit),o.componentInstance.setRefresh(this.updateDatatable),o.componentInstance.setCategoria(e)})},this.onClickDelete=e=>{this.modalConfirm.open(a.zD,`Deseja excluir a categoria ${this.dataTable.row.descricao} ?`).componentInstance.setConfirmButton(()=>this.deleteCategoria(e))},this.deleteCategoria=e=>{this.categoriaService.deleteCategoria(e).subscribe({next:o=>{!0===o?(this.updateDatatable(),this.modalAlert.open(a.Cy,"Categoria exclu\xedda com sucesso",a.vT.Success)):this.modalAlert.open(a.Cy,"Erro ao exclu\xedr categoria",a.vT.Warning)},error:o=>{this.modalAlert.open(a.Cy,o,a.vT.Warning)}})}}ngOnInit(){this.menuService.setMenuSelecionado(2),this.initializeDataTable()}parseToCategoriaData(l){return l.map(n=>({id:n.id,descricao:n.descricao,tipoCategoria:u.L[n.idTipoCategoria]}))}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(G.$1),t.rXU(a.Cy),t.rXU(a.Hw),t.rXU(a.zD),t.rXU(g.vg))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-categorias"]],viewQuery:function(n,r){if(1&n&&t.GBs(a.up,5),2&n){let c;t.mGM(c=t.lsd())&&(r.dataTable=c.first)}},decls:5,vars:6,consts:[[1,"flex-grow-0","bg-info","w-100"],[3,"onClickNovo","btnNovo"],[1,"h-100","d-flex","flex-column","table-responsive","flex-grow-1","flex-fill","m-1","p-2","border","border-2","border-primary","rounded-4","overflow-scroll-hidden"],[3,"columns","data","editAction","deleteAction"]],template:function(n,r){1&n&&(t.j41(0,"app-layout")(1,"div",0),t.nrm(2,"app-barra-ferramenta",1),t.k0s(),t.j41(3,"div",2),t.nrm(4,"app-data-table",3),t.k0s()()),2&n&&(t.R7$(2),t.Y8G("onClickNovo",r.onClickNovo)("btnNovo",!0),t.R7$(2),t.Y8G("columns",r.columns)("data",r.catgoriasData)("editAction",r.onClickEdit)("deleteAction",r.onClickDelete))},dependencies:[E.C,j.t,k.u]})}}return i})()}];let $=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(I),f.iI]})}}return i})();var M=s(5917),U=s(6182);let N=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[g.vg],imports:[C.MD,$,d.X1,U.m_,v.fS,p.RG,b.Ve,M.G]})}}return i})()}}]);