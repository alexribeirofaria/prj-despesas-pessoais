"use strict";(self.webpackChunkangularapp=self.webpackChunkangularapp||[]).push([[917],{5917:(R,v,r)=>{r.d(v,{G:()=>s});var l=r(6610),c=r(7222),S=r(2802),g=r(5183),C=r(8910),V=r(8278),M=r(1607),w=r(2490),f=r(4587),E=r(2613),a=r(7788);let t=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=a.$C({type:i});static#i=this.\u0275inj=a.G2t({imports:[c.YN,l.MD,f.fS,w.RG,V.WX,M.X6,E.D]})}return i})();var e=r(7058);let n=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=a.$C({type:i});static#i=this.\u0275inj=a.G2t({imports:[l.MD,e.H]})}return i})(),s=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=a.$C({type:i});static#i=this.\u0275inj=a.G2t({providers:[C.up],imports:[l.MD,c.YN,t,g.qr,n,g.qr,S.Ve]})}return i})()},5183:(R,v,r)=>{r.d(v,{Jf:()=>f,qr:()=>E});var l=r(7788),c=r(7222),S=r(6610);let g=new l.nKC("currency.mask.config");class C{constructor(t){this.htmlInputElement=t}setCursorAt(t){if(this.htmlInputElement.setSelectionRange)this.htmlInputElement.focus(),this.htmlInputElement.setSelectionRange(t,t);else if(this.htmlInputElement.createTextRange){let e=this.htmlInputElement.createTextRange();e.collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select()}}updateValueAndCursor(t,e,n){this.rawValue=t,this.setCursorAt(n-=e-t.length)}get canInputMoreNumbers(){let t=!(this.rawValue.length>=this.htmlInputElement.maxLength&&this.htmlInputElement.maxLength>=0),e=this.inputSelection.selectionStart,n=this.inputSelection.selectionEnd,s=!(e==n||!this.htmlInputElement.value.substring(e,n).match(/\d/)),i="0"==this.htmlInputElement.value.substring(0,1);return t||s||i}get inputSelection(){let t=0,e=0;if("number"==typeof this.htmlInputElement.selectionStart&&"number"==typeof this.htmlInputElement.selectionEnd)t=this.htmlInputElement.selectionStart,e=this.htmlInputElement.selectionEnd;else{let n=document.getSelection().anchorNode;if(n&&n.firstChild==this.htmlInputElement){let s=this.htmlInputElement.value.length,i=this.htmlInputElement.value.replace(/\r\n/g,"\n"),u=this.htmlInputElement.createTextRange(),h=this.htmlInputElement.createTextRange();h.collapse(!1),u.compareEndPoints("StartToEnd",h)>-1?t=e=s:(t=-u.moveStart("character",-s),t+=i.slice(0,t).split("\n").length-1,u.compareEndPoints("EndToEnd",h)>-1?e=s:(e=-u.moveEnd("character",-s),e+=i.slice(0,e).split("\n").length-1))}}return{selectionStart:t,selectionEnd:e}}get rawValue(){return this.htmlInputElement&&this.htmlInputElement.value}set rawValue(t){this._storedRawValue=t,this.htmlInputElement&&(this.htmlInputElement.value=t)}get storedRawValue(){return this._storedRawValue}}class V{constructor(t,e){this.htmlInputElement=t,this.options=e,this.inputManager=new C(t)}addNumber(t){this.rawValue||(this.rawValue=this.applyMask(!1,"0"));let e=String.fromCharCode(t),n=this.inputSelection.selectionStart,s=this.inputSelection.selectionEnd;this.rawValue=this.rawValue.substring(0,n)+e+this.rawValue.substring(s,this.rawValue.length),this.updateFieldValue(n+1)}applyMask(t,e){let{allowNegative:n,decimal:s,precision:i,prefix:u,suffix:h,thousands:o}=this.options,p=(e=t?new Number(e).toFixed(i):e).replace(/[^0-9]/g,"");if(!p)return"";let m=p.slice(0,p.length-i).replace(/^0*/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,o);""==m&&(m="0");let y=m,d=p.slice(p.length-i);i>0&&(d="0".repeat(i-d.length)+d,y+=s+d);let I=0==parseInt(m)&&(0==parseInt(d)||""==d);return(e.indexOf("-")>-1&&n&&!I?"-":"")+u+y+h}clearMask(t){if(null==t||""==t)return null;let e=t.replace(this.options.prefix,"").replace(this.options.suffix,"");return this.options.thousands&&(e=e.replace(new RegExp("\\"+this.options.thousands,"g"),"")),this.options.decimal&&(e=e.replace(this.options.decimal,".")),parseFloat(e)}changeToNegative(){if(this.options.allowNegative&&""!=this.rawValue&&"-"!=this.rawValue.charAt(0)&&0!=this.value){let t=this.inputSelection.selectionStart;this.rawValue="-"+this.rawValue,this.updateFieldValue(t+1)}}changeToPositive(){let t=this.inputSelection.selectionStart;this.rawValue=this.rawValue.replace("-",""),this.updateFieldValue(t-1)}fixCursorPosition(t){let e=this.inputSelection.selectionStart;e>this.getRawValueWithoutSuffixEndPosition()||t?this.inputManager.setCursorAt(this.getRawValueWithoutSuffixEndPosition()):e<this.getRawValueWithoutPrefixStartPosition()&&this.inputManager.setCursorAt(this.getRawValueWithoutPrefixStartPosition())}getRawValueWithoutSuffixEndPosition(){return this.rawValue.length-this.options.suffix.length}getRawValueWithoutPrefixStartPosition(){return null!=this.value&&this.value<0?this.options.prefix.length+1:this.options.prefix.length}removeNumber(t){let{decimal:e,thousands:n}=this.options,s=this.inputSelection.selectionEnd,i=this.inputSelection.selectionStart;i>this.rawValue.length-this.options.suffix.length&&(s=this.rawValue.length-this.options.suffix.length,i=this.rawValue.length-this.options.suffix.length),s==i&&((46==t||63272==t)&&/^\d+$/.test(this.rawValue.substring(i,s+1))&&(s+=1),(46==t||63272==t)&&(this.rawValue.substring(i,s+1)==e||this.rawValue.substring(i,s+1)==n)&&(s+=2,i+=1),8==t&&/^\d+$/.test(this.rawValue.substring(i-1,s))&&(i-=1),8==t&&(this.rawValue.substring(i-1,s)==e||this.rawValue.substring(i-1,s)==n)&&(i-=2,s-=1)),this.rawValue=this.rawValue.substring(0,i)+this.rawValue.substring(s,this.rawValue.length),this.updateFieldValue(i)}updateFieldValue(t){let e=this.applyMask(!1,this.rawValue||"");this.inputManager.updateValueAndCursor(e,this.rawValue.length,t=t??this.rawValue.length)}updateOptions(t){let e=this.value;this.options=t,this.value=e}get canInputMoreNumbers(){return this.inputManager.canInputMoreNumbers}get inputSelection(){return this.inputManager.inputSelection}get rawValue(){return this.inputManager.rawValue}set rawValue(t){this.inputManager.rawValue=t}get storedRawValue(){return this.inputManager.storedRawValue}get value(){return this.clearMask(this.rawValue)}set value(t){this.rawValue=this.applyMask(!0,""+t)}}class M{constructor(t,e){this.inputService=new V(t,e),this.htmlInputElement=t}handleClick(t,e){0==Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart)&&!isNaN(this.inputService.value)&&this.inputService.fixCursorPosition(e)}handleCut(t){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},0)}handleInput(t){if(this.isReadOnly())return;let e=this.getNewKeyCode(this.inputService.storedRawValue,this.inputService.rawValue),n=this.inputService.rawValue.length,s=this.inputService.inputSelection.selectionEnd,i=this.inputService.getRawValueWithoutSuffixEndPosition(),u=this.inputService.storedRawValue.length;if(this.inputService.rawValue=this.inputService.storedRawValue,s==i&&1==Math.abs(n-u)||0==u){if(n<u&&(0!=this.inputService.value?this.inputService.removeNumber(8):this.setValue(null)),n>u)switch(e){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:if(!this.inputService.canInputMoreNumbers||isNaN(this.inputService.value)&&null==String.fromCharCode(e).match(/\d/))return;this.inputService.addNumber(e)}this.setCursorPosition(t),this.onModelChange(this.inputService.value)}else this.setCursorPosition(t)}handleKeydown(t){if(this.isReadOnly())return;let e=t.which||t.charCode||t.keyCode;if(8==e||46==e||63272==e){t.preventDefault();let n=Math.abs(this.inputService.inputSelection.selectionEnd-this.inputService.inputSelection.selectionStart);(n==this.inputService.rawValue.length||0==this.inputService.value)&&(this.setValue(null),this.onModelChange(this.inputService.value)),0==n&&!isNaN(this.inputService.value)&&(this.inputService.removeNumber(e),this.onModelChange(this.inputService.value)),(8===e||46===e)&&0!=n&&!isNaN(this.inputService.value)&&(this.inputService.removeNumber(e),this.onModelChange(this.inputService.value))}}handleKeypress(t){if(this.isReadOnly())return;let e=t.which||t.charCode||t.keyCode;if(null!=e&&-1==[9,13].indexOf(e)&&!this.isArrowEndHomeKeyInFirefox(t)){switch(e){case 43:this.inputService.changeToPositive();break;case 45:this.inputService.changeToNegative();break;default:this.inputService.canInputMoreNumbers&&(!isNaN(this.inputService.value)||null!=String.fromCharCode(e).match(/\d/))&&this.inputService.addNumber(e)}t.preventDefault(),this.onModelChange(this.inputService.value)}}handleKeyup(t){this.inputService.fixCursorPosition()}handlePaste(t){this.isReadOnly()||setTimeout(()=>{this.inputService.updateFieldValue(),this.setValue(this.inputService.value),this.onModelChange(this.inputService.value)},1)}updateOptions(t){this.inputService.updateOptions(t)}getOnModelChange(){return this.onModelChange}setOnModelChange(t){this.onModelChange=t}getOnModelTouched(){return this.onModelTouched}setOnModelTouched(t){this.onModelTouched=t}setValue(t){this.inputService.value=t}getNewKeyCode(t,e){if(t.length>e.length)return null;for(let n=0;n<e.length;n++)if(t.length==n||t[n]!=e[n])return e.charCodeAt(n);return null}isArrowEndHomeKeyInFirefox(t){return-1!=[35,36,37,38,39,40].indexOf(t.keyCode)&&(null==t.charCode||0==t.charCode)}isReadOnly(){return this.htmlInputElement&&this.htmlInputElement.readOnly}setCursorPosition(t){let e=this.inputService.getRawValueWithoutSuffixEndPosition();const n=t.target;setTimeout(function(){n.setSelectionRange(e,e)},0)}}const w={provide:c.kq,useExisting:(0,l.Rfq)(()=>f),multi:!0};let f=(()=>{class a{constructor(e,n,s){this.currencyMaskConfig=e,this.elementRef=n,this.keyValueDiffers=s,this.options={},this.optionsTemplate={align:"right",allowNegative:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:","},e&&(this.optionsTemplate=e),this.keyValueDiffer=s.find({}).create()}ngAfterViewInit(){this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align}ngDoCheck(){this.keyValueDiffer.diff(this.options)&&(this.elementRef.nativeElement.style.textAlign=this.options.align?this.options.align:this.optionsTemplate.align,this.inputHandler.updateOptions(Object.assign({},this.optionsTemplate,this.options)))}ngOnInit(){this.inputHandler=new M(this.elementRef.nativeElement,Object.assign({},this.optionsTemplate,this.options))}handleBlur(e){this.inputHandler.getOnModelTouched().apply(e)}handleClick(e){this.inputHandler.handleClick(e,this.isChromeAndroid())}handleCut(e){this.isChromeAndroid()||this.inputHandler.handleCut(e)}handleInput(e){this.isChromeAndroid()&&this.inputHandler.handleInput(e)}handleKeydown(e){this.isChromeAndroid()||this.inputHandler.handleKeydown(e)}handleKeypress(e){this.isChromeAndroid()||this.inputHandler.handleKeypress(e)}handleKeyup(e){this.isChromeAndroid()||this.inputHandler.handleKeyup(e)}handlePaste(e){this.isChromeAndroid()||this.inputHandler.handlePaste(e)}isChromeAndroid(){return/chrome/i.test(navigator.userAgent)&&/android/i.test(navigator.userAgent)}registerOnChange(e){this.inputHandler.setOnModelChange(e)}registerOnTouched(e){this.inputHandler.setOnModelTouched(e)}setDisabledState(e){this.elementRef.nativeElement.disabled=e}validate(e){let n={};return e.value>this.max&&(n.max=!0),e.value<this.min&&(n.min=!0),n!={}?n:null}writeValue(e){this.inputHandler.setValue(e)}}return a.\u0275fac=function(e){return new(e||a)(l.rXU(g,8),l.rXU(l.aKT),l.rXU(l.MKu))},a.\u0275dir=l.FsC({type:a,selectors:[["","currencyMask",""]],hostBindings:function(e,n){1&e&&l.bIt("blur",function(i){return n.handleBlur(i)})("click",function(i){return n.handleClick(i)})("cut",function(i){return n.handleCut(i)})("input",function(i){return n.handleInput(i)})("keydown",function(i){return n.handleKeydown(i)})("keypress",function(i){return n.handleKeypress(i)})("keyup",function(i){return n.handleKeyup(i)})("paste",function(i){return n.handlePaste(i)})},inputs:{max:"max",min:"min",options:"options"},features:[l.Jv_([w,{provide:c.cz,useExisting:a,multi:!0}])]}),a})(),E=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=l.$C({type:a}),a.\u0275inj=l.G2t({imports:[[S.MD,c.YN]]}),a})()}}]);