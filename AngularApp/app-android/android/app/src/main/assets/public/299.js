"use strict";(self.webpackChunkangularapp=self.webpackChunkangularapp||[]).push([[299],{7299:($,p,a)=>{a.r(p),a.d(p,{DespesasModule:()=>j});var u=a(6610),D=a(7222),f=a(8278),C=a(1607),y=a(2490),g=a(6182),b=a(4587),d=a(490),h=a(7415),T=a(3346),m=a.n(T),n=a(8910);const R=[{title:"Data",data:"data"},{title:"Categoria",data:"categoria"},{title:"Descri\xe7\xe3o",data:"descricao"},{title:"Valor",data:"valor"},{title:"Data Venciemnto",data:"dataVencimento"}];var v=a(9450),t=a(3279),F=a(2710),M=a(9626),S=a(7487),Y=a(4077),I=a(4901);const V=[{path:"",component:(()=>{class o{constructor(r,e,i,c,A,U){this.menuService=r,this.modalAlert=e,this.modalForm=i,this.modalConfirm=c,this.despesaService=A,this.despesasFormComponent=U,this.despesasData=[],this.columns=R,this.initializeDataTable=()=>{this.despesaService.getDespesas().subscribe({next:s=>{s&&(this.despesasData=this.parseToDespesasData(s),this.dataTable.loadData(this.despesasData),this.dataTable.rerender())},error:s=>{this.modalAlert.open(n.Cy,s,n.vT.Warning)}})},this.updateDatatable=()=>{this.despesaService.getDespesas().subscribe({next:s=>{s&&(this.despesasData=this.parseToDespesasData(s),this.dataTable.rerender())},error:s=>{this.modalAlert.open(n.Cy,s,n.vT.Warning)}})},this.onClickNovo=()=>{const s=this.modalForm.modalService.open(d.o,{centered:!0});s.shown.subscribe(()=>{s.componentInstance.action=v.u.Create,s.componentInstance.setRefresh(this.updateDatatable)})},this.onClickEdit=s=>{const l=this.modalForm.modalService.open(d.o,{centered:!0});l.shown.subscribe(()=>{l.componentInstance.action=v.u.Edit,l.componentInstance.setRefresh(this.updateDatatable),l.componentInstance.editDespesa(s)})},this.onClickDelete=s=>{const l=this.modalConfirm.open(n.zD,`Deseja excluir a despesa ${this.dataTable.row.descricao} ?`);l.shown.subscribe(()=>{l.componentInstance.setConfirmButton(()=>this.despesasFormComponent.deleteDespesa(s,this.updateDatatable))})}}ngOnInit(){this.menuService.setMenuSelecionado(3),this.initializeDataTable()}parseToDespesasData(r){return r.map(e=>({id:e.id,data:m()(e.data).format("DD/MM/YYYY"),categoria:e.categoria.descricao,descricao:e.descricao,valor:`${e.valor.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})}`,dataVencimento:e.dataVencimento&&m()(e.dataVencimento).isValid()?m()(e.dataVencimento).format("DD/MM/YYYY"):null}))}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(F.$1),t.rXU(n.Cy),t.rXU(n.Hw),t.rXU(n.zD),t.rXU(M.r6),t.rXU(d.o))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-despesas"]],viewQuery:function(e,i){if(1&e&&t.GBs(n.up,5),2&e){let c;t.mGM(c=t.lsd())&&(i.dataTable=c.first)}},decls:5,vars:6,consts:[[1,"flex-grow-0","bg-info","w-100"],[3,"onClickNovo","btnNovo"],[1,"h-100","d-flex","flex-column","table-responsive","flex-grow-1","flex-fill","m-1","p-2","border","border-2","border-primary","rounded-4","overflow-scroll-hidden"],[3,"columns","data","editAction","deleteAction"]],template:function(e,i){1&e&&(t.j41(0,"app-layout")(1,"div",0),t.nrm(2,"app-barra-ferramenta",1),t.k0s(),t.j41(3,"div",2),t.nrm(4,"app-data-table",3),t.k0s()()),2&e&&(t.R7$(2),t.Y8G("onClickNovo",i.onClickNovo)("btnNovo",!0),t.R7$(2),t.Y8G("columns",i.columns)("data",i.despesasData)("editAction",i.onClickEdit)("deleteAction",i.onClickDelete))},dependencies:[S.C,Y.t,I.u]})}}return o})()}];let X=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(V),h.iI]})}}return o})();var G=a(5917);let j=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({providers:[d.o],imports:[u.MD,X,D.X1,G.G,g.m_,b.fS,y.RG,f.WX,C.X6]})}}return o})()}}]);