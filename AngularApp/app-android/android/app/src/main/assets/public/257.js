"use strict";(self.webpackChunkangularapp=self.webpackChunkangularapp||[]).push([[257],{2257:(Y,m,a)=>{a.r(m),a.d(m,{ReceitasModule:()=>U});var u=a(6610),f=a(7222),p=a(8278),C=a(1607),D=a(2490),R=a(6182),y=a(4587),l=a(125),h=a(7415),g=a(3346),b=a.n(g),n=a(8910);const T=[{title:"Data",data:"data"},{title:"Categoria",data:"categoria"},{title:"Descri\xe7\xe3o",data:"descricao"},{title:"Valor",data:"valor"}];var v=a(9450),t=a(3279),F=a(2710),S=a(9626),I=a(7487),M=a(4077),X=a(4901);const G=[{path:"",component:(()=>{class i{constructor(s,e,r,d,$,N){this.menuService=s,this.modalAlert=e,this.modalForm=r,this.modalConfirm=d,this.receitaService=$,this.receitasFormComponent=N,this.receitasData=[],this.columns=T,this.initializeDataTable=()=>{this.receitaService.getReceitas().subscribe({next:o=>{o&&(this.receitasData=this.parseToReceitaData(o),this.dataTable.loadData(this.receitasData),this.dataTable.rerender())},error:o=>{this.modalAlert.open(n.Cy,o,n.vT.Warning)}})},this.updateDatatable=()=>{this.receitaService.getReceitas().subscribe({next:o=>{o&&(this.receitasData=this.parseToReceitaData(o),this.dataTable.rerender())},error:o=>{this.modalAlert.open(n.Cy,o,n.vT.Warning)}})},this.onClickNovo=()=>{const o=this.modalForm.modalService.open(l.O,{centered:!0});o.shown.subscribe(()=>{o.componentInstance.action=v.u.Create,o.componentInstance.setRefresh(this.updateDatatable)})},this.onClickEdit=o=>{const c=this.modalForm.modalService.open(l.O,{centered:!0});c.shown.subscribe(()=>{c.componentInstance.action=v.u.Edit,c.componentInstance.setRefresh(this.updateDatatable),c.componentInstance.editReceita(o)})},this.onClickDelete=o=>{const c=this.modalConfirm.open(n.zD,`Deseja excluir a receita ${this.dataTable.row.descricao} ?`);c.shown.subscribe(()=>{c.componentInstance.setConfirmButton(()=>{this.receitasFormComponent.deleteReceita(o,()=>{this.updateDatatable()})})})},s.setMenuSelecionado(4)}ngOnInit(){this.menuService.setMenuSelecionado(4),this.initializeDataTable()}parseToReceitaData(s){return s.map(e=>({id:e.id,data:b()(e.data).format("DD/MM/YYYY"),categoria:e.categoria.descricao,descricao:e.descricao,valor:`${e.valor.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})}`}))}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(F.$1),t.rXU(n.Cy),t.rXU(n.Hw),t.rXU(n.zD),t.rXU(S.DE),t.rXU(l.O))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-receitas"]],viewQuery:function(e,r){if(1&e&&t.GBs(n.up,5),2&e){let d;t.mGM(d=t.lsd())&&(r.dataTable=d.first)}},decls:5,vars:6,consts:[[1,"flex-grow-0","bg-info","w-100"],[3,"onClickNovo","btnNovo"],[1,"h-100","d-flex","flex-column","table-responsive","flex-grow-1","flex-fill","m-1","p-2","border","border-2","border-primary","rounded-4","overflow-scroll-hidden"],[3,"columns","data","editAction","deleteAction"]],template:function(e,r){1&e&&(t.j41(0,"app-layout")(1,"div",0),t.nrm(2,"app-barra-ferramenta",1),t.k0s(),t.j41(3,"div",2),t.nrm(4,"app-data-table",3),t.k0s()()),2&e&&(t.R7$(2),t.Y8G("onClickNovo",r.onClickNovo)("btnNovo",!0),t.R7$(2),t.Y8G("columns",r.columns)("data",r.receitasData)("editAction",r.onClickEdit)("deleteAction",r.onClickDelete))},dependencies:[I.C,M.t,X.u]})}}return i})()}];let j=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(G),h.iI]})}}return i})();var A=a(5917);let U=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[l.O],imports:[u.MD,j,f.X1,A.G,R.m_,y.fS,D.RG,p.WX,C.X6]})}}return i})()}}]);