"use strict";(self.webpackChunkangularapp=self.webpackChunkangularapp||[]).push([[467],{3467:(E,p,a)=>{a.r(p),a.d(p,{LancamentosModule:()=>j});var C=a(6610),f=a(7415),g=a(3346),u=a.n(g),i=a(8910);const y=[{title:"Data",data:"data"},{title:"Tipo",data:"tipoCategoria"},{title:"Categoria",data:"categoria"},{title:"Descri\xe7\xe3o",data:"descricao"},{title:"Valor",data:"valor"}];var v=a(9450),m=a(490),d=a(125),t=a(3279),D=a(2710),b=a(9626),M=a(7487),A=a(4077),T=a(4901);const L=[{path:"",component:(()=>{class s{constructor(c,e,r,l,$,O,x,z){this.menuService=c,this.modalAlert=e,this.modalForm=r,this.modalConfirm=l,this.lancamentoservice=$,this.despesasFormComponent=O,this.receitasFormComponent=x,this.filterMesAnoService=z,this.lancamentosData=[],this.columns=y,this.initializeDataTable=()=>{this.lancamentoservice.getLancamentosByMesAno(u()(this.filterMesAnoService.dataMesAno)).subscribe({next:o=>{o&&(this.lancamentosData=this.parseToLancamentosData(o),this.dataTable.loadData(this.lancamentosData),this.barraFerramenta.setOnChangeDataMesAno(this.updateDatatable),this.dataTable.rerender())},error:o=>{this.modalAlert.open(i.Cy,o,i.vT.Warning)}})},this.updateDatatable=()=>{this.lancamentoservice.getLancamentosByMesAno(u()(this.filterMesAnoService.dataMesAno)).subscribe({next:o=>{o&&(this.lancamentosData=this.parseToLancamentosData(o),this.dataTable.rerender())},error:o=>{this.modalAlert.open(i.Cy,o,i.vT.Warning)}})},this.onClickEdit=(o,h)=>{let n;"Despesa"===h?(n=this.modalForm.modalService.open(m.o,{centered:!0}),n.shown.subscribe(()=>{n.componentInstance.action=v.u.Edit,n.componentInstance.setRefresh(this.updateDatatable),n.componentInstance.editDespesa(o)})):(n=this.modalForm.modalService.open(d.O,{centered:!0}),n.shown.subscribe(()=>{n.componentInstance.action=v.u.Edit,n.componentInstance.setRefresh(this.updateDatatable),n.componentInstance.editReceita(o)}))},this.onClickDelete=(o,h)=>{let n;"Despesa"===h?(n=this.modalConfirm.open(i.zD,`Deseja excluir a despesa ${this.dataTable.row.descricao} ?`),n.shown.subscribe(()=>{n.componentInstance.setConfirmButton(()=>this.despesasFormComponent.deleteDespesa(o,this.updateDatatable))})):(n=this.modalConfirm.open(i.zD,`Deseja excluir a receita ${this.dataTable.row.descricao} ?`),n.shown.subscribe(()=>{n.componentInstance.setConfirmButton(()=>this.receitasFormComponent.deleteReceita(o,this.updateDatatable))}))}}ngOnInit(){this.menuService.setMenuSelecionado(5),this.initializeDataTable()}parseToLancamentosData(c){return c.map(e=>({id:0===e.idDespesa?e.idReceita:e.idDespesa,data:e.data,tipoCategoria:e.tipoCategoria,categoria:e.categoria,descricao:e.descricao,valor:`${e.valor.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})}`}))}static{this.\u0275fac=function(e){return new(e||s)(t.rXU(D.$1),t.rXU(i.Cy),t.rXU(i.Hw),t.rXU(i.zD),t.rXU(b.OG),t.rXU(m.o),t.rXU(d.O),t.rXU(D.fT))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-lancamentos"]],viewQuery:function(e,r){if(1&e&&(t.GBs(i.tB,5),t.GBs(i.up,5)),2&e){let l;t.mGM(l=t.lsd())&&(r.barraFerramenta=l.first),t.mGM(l=t.lsd())&&(r.dataTable=l.first)}},decls:5,vars:6,consts:[[1,"flex-grow-0","bg-info","w-100"],[3,"btnNovo","dtMesAno"],[1,"h-100","d-flex","flex-column","table-responsive","flex-grow-1","flex-fill","m-1","p-2","border","border-2","border-primary","rounded-4","overflow-scroll-hidden"],[3,"columns","data","editAction","deleteAction"]],template:function(e,r){1&e&&(t.j41(0,"app-layout")(1,"div",0),t.nrm(2,"app-barra-ferramenta",1),t.k0s(),t.j41(3,"div",2),t.nrm(4,"app-data-table",3),t.k0s()()),2&e&&(t.R7$(2),t.Y8G("btnNovo",!1)("dtMesAno",!0),t.R7$(2),t.Y8G("columns",r.columns)("data",r.lancamentosData)("editAction",r.onClickEdit)("deleteAction",r.onClickDelete))},dependencies:[M.C,A.t,T.u],styles:[".cdk-overlay-container[_ngcontent-%COMP%]{z-index:1999}"]})}}return s})()}];let F=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(L),f.iI]})}}return s})();var R=a(7222),G=a(8278),I=a(1607),X=a(2490),B=a(6182),S=a(4587),U=a(5917);let j=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({providers:[m.o,d.O],imports:[C.MD,F,R.X1,U.G,B.m_,S.fS,X.RG,G.WX,I.X6]})}}return s})()}}]);