services:
  app-despesas-pessoais-staging:
    image: alexfariakof/api-despesas-backend-netcore-dev-img
    environment:
      TZ: America/Sao_Paulo
      ASPNETCORE_ENVIRONMENT: Staging
    logging:
      driver: json-file
      options:
        max-size: "2m"
        max-file: "1"
    build:
       context: .
       dockerfile: src/WebApi/Dockerfile.production        
    ports:
      - 42534:42535
      - 42533:42536
    volumes:
      - ${LOCALAPPDATA}/Microsoft/UserSecrets:/home/app/.microsoft/usersecrets:ro
      - ${LOCALAPPDATA}/ASP.NET/Https:/home/app/.aspnet/https:ro    
      - ./src/AngularApp/dist:/app/wwwroot
      - ./src/WebApi/appsettings.docker.json:/app/appsettings.json:ro
      - ./src/WebApi/appsettings.docker.development.json:/app/appsettings.development.json:ro
      - ./src/WebApi/certificate/webapi-cert.pfx:/app/certificate/webapi-cert.pfx:ro
    